{"ast":null,"code":"import _slicedToArray from \"/Users/macbook/Desktop/dashboard/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/macbook/Desktop/dashboard/client/src/components/Dashboard/barChart/BarChart.js\";\nimport React, { useEffect, useCallback, useState } from \"react\";\nimport \"./bar_chart.scss\";\nimport * as d3 from \"d3\";\nimport { getRatio } from \"d3\";\n\nconst BarChart = ({\n  companies\n}) => {\n  let _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      sumOfVisitors = _useState2[0],\n      setSumOfVisitors = _useState2[1];\n\n  console.log(sumOfVisitors);\n  const margin = {\n    left: 50,\n    top: 10,\n    right: 50,\n    bottom: 30\n  };\n  const drawChart = useCallback(() => {\n    const w = 500;\n    const h = 300;\n    let data = companies.map(a => a.visitors);\n    let companiesName = companies.map(a => a.name);\n    console.log(companiesName);\n    const myColor = d3.scaleOrdinal().domain(data).range([\"#F8C675\", \"rgb(221, 44, 74)\"]);\n    const marginRatio = {\n      left: getRatio(\"left\"),\n      top: getRatio(\"top\"),\n      right: getRatio(\"right\"),\n      bottom: getRatio(\"bottom\")\n    };\n    const svg = d3.select(\".bar_chart\").append(\"svg\").style(\"padding\", marginRatio.top + \" \" + marginRatio.right + \" \" + marginRatio.bottom + \" \" + marginRatio.left + \" \").attr(\"width\", w).attr(\"height\", h).attr(\"preserveAspectRatio\", \"xMinYMin meet\").attr(\"viewBox\", \"0 0 \" + (w + margin.left + margin.right) + \" \" + (h + margin.top + margin.bottom)).style(\"margin-left\", 100);\n    svg.selectAll(\"rect\").data(data).enter().append(\"rect\").attr(\"x\", (d, i) => i * 70).attr(\"y\", (d, i) => h - 10 * d).attr(\"width\", 65).attr(\"height\", (d, i) => d * 70).attr(\"fill\", function (d) {\n      return myColor(d);\n    });\n    svg.selectAll(\"text\").data(data).enter().append(\"text\").text(d => d).attr(\"x\", (d, i) => i * 70).attr(\"y\", (d, i) => h - 10 * d - 3);\n  }, [companies, margin.bottom, margin.left, margin.right, margin.top]);\n  useEffect(() => {\n    if (companies) {\n      drawChart();\n      setSumOfVisitors(companies.reduce((acc, obj) => {\n        return acc + obj.visitors;\n      }, 0));\n    }\n  }, [companies, drawChart]);\n  return React.createElement(\"div\", {\n    className: \"bar_chart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"All current visitors:\", sumOfVisitors));\n};\n\nexport default BarChart;","map":{"version":3,"sources":["/Users/macbook/Desktop/dashboard/client/src/components/Dashboard/barChart/BarChart.js"],"names":["React","useEffect","useCallback","useState","d3","getRatio","BarChart","companies","sumOfVisitors","setSumOfVisitors","console","log","margin","left","top","right","bottom","drawChart","w","h","data","map","a","visitors","companiesName","name","myColor","scaleOrdinal","domain","range","marginRatio","svg","select","append","style","attr","selectAll","enter","d","i","text","reduce","acc","obj"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback, useState } from \"react\";\nimport \"./bar_chart.scss\";\nimport * as d3 from \"d3\";\nimport { getRatio } from \"d3\";\n\nconst BarChart = ({ companies }) => {\n  let [sumOfVisitors, setSumOfVisitors] = useState(0);\n  console.log(sumOfVisitors);\n  const margin = { left: 50, top: 10, right: 50, bottom: 30 };\n\n  const drawChart = useCallback(() => {\n    const w = 500;\n    const h = 300;\n    let data = companies.map(a => a.visitors);\n    let companiesName = companies.map(a => a.name);\n    console.log(companiesName);\n    const myColor = d3\n      .scaleOrdinal()\n      .domain(data)\n      .range([\"#F8C675\", \"rgb(221, 44, 74)\"]);\n\n    const marginRatio = {\n      left: getRatio(\"left\"),\n      top: getRatio(\"top\"),\n      right: getRatio(\"right\"),\n      bottom: getRatio(\"bottom\")\n    };\n\n    const svg = d3\n      .select(\".bar_chart\")\n      .append(\"svg\")\n      .style(\n        \"padding\",\n        marginRatio.top +\n          \" \" +\n          marginRatio.right +\n          \" \" +\n          marginRatio.bottom +\n          \" \" +\n          marginRatio.left +\n          \" \"\n      )\n      .attr(\"width\", w)\n      .attr(\"height\", h)\n      .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n      .attr(\n        \"viewBox\",\n        \"0 0 \" +\n          (w + margin.left + margin.right) +\n          \" \" +\n          (h + margin.top + margin.bottom)\n      )\n      .style(\"margin-left\", 100);\n\n    svg\n      .selectAll(\"rect\")\n      .data(data)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d, i) => i * 70)\n      .attr(\"y\", (d, i) => h - 10 * d)\n      .attr(\"width\", 65)\n      .attr(\"height\", (d, i) => d * 70)\n      .attr(\"fill\", function(d) {\n        return myColor(d);\n      });\n\n    svg\n      .selectAll(\"text\")\n      .data(data)\n      .enter()\n      .append(\"text\")\n      .text(d => d)\n      .attr(\"x\", (d, i) => i * 70)\n      .attr(\"y\", (d, i) => h - 10 * d - 3);\n  }, [companies, margin.bottom, margin.left, margin.right, margin.top]);\n\n  useEffect(() => {\n    if (companies) {\n      drawChart();\n      setSumOfVisitors(\n        companies.reduce((acc, obj) => {\n          return acc + obj.visitors;\n        }, 0)\n      );\n    }\n  }, [companies, drawChart]);\n  return (\n    <div className=\"bar_chart\">\n      <span>All current visitors:{sumOfVisitors}</span>\n    </div>\n  );\n};\nexport default BarChart;\n"]},"metadata":{},"sourceType":"module"}