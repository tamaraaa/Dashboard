{"ast":null,"code":"import _slicedToArray from \"/Users/macbook/Desktop/dashboard/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/macbook/Desktop/dashboard/client/src/components/Dashboard/barChart/BarChart.js\";\nimport React, { useEffect, useCallback, useState } from \"react\";\nimport \"./bar_chart.scss\";\nimport * as d3 from \"d3\";\n\nconst BarChart = ({\n  companies\n}) => {\n  let _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      sumOfVisitors = _useState2[0],\n      setSumOfVisitors = _useState2[1];\n\n  console.log(sumOfVisitors);\n  const margin = {\n    left: 50,\n    top: 10,\n    right: 50,\n    bottom: 30\n  };\n  const drawChart = useCallback(() => {\n    const w = \"100%\";\n    const h = 300;\n    let data = companies.map(a => a.visitors);\n    let companiesName = companies.map(a => a.name);\n    console.log(companiesName);\n    const myColor = d3.scaleOrdinal().domain(data).range([\"#F8C675\", \"rgb(221, 44, 74)\"]);\n    const svg = d3.select(\".bar_chart\").append(\"svg\").attr(\"width\", w).attr(\"height\", h).attr(\"preserveAspectRatio\", \"xMinYMin meet\").attr(\"viewBox\", \"0 0 \" + (w + margin.left + margin.right) + \" \" + (h + margin.top + margin.bottom)).style(\"margin\", \"0 auto\");\n    svg.selectAll(\"rect\").data(data).enter().append(\"rect\").attr(\"x\", (d, i) => i * 70).attr(\"y\", (d, i) => h - 10 * d).attr(\"width\", 50).attr(\"height\", (d, i) => d * 70).attr(\"fill\", function (d) {\n      return myColor(d);\n    });\n    svg.selectAll(\"text\").data(data).enter().append(\"text\").text(d => d).attr(\"x\", (d, i) => i * 70).attr(\"y\", (d, i) => h - 10 * d - 3);\n  }, [companies, margin.bottom, margin.left, margin.right, margin.top]);\n  useEffect(() => {\n    if (companies) {\n      drawChart();\n      setSumOfVisitors(companies.reduce((acc, obj) => {\n        return acc + obj.visitors;\n      }, 0));\n    }\n  }, [companies, drawChart]);\n  return React.createElement(\"div\", {\n    className: \"bar_chart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"All current visitors:\", sumOfVisitors));\n};\n\nexport default BarChart;","map":{"version":3,"sources":["/Users/macbook/Desktop/dashboard/client/src/components/Dashboard/barChart/BarChart.js"],"names":["React","useEffect","useCallback","useState","d3","BarChart","companies","sumOfVisitors","setSumOfVisitors","console","log","margin","left","top","right","bottom","drawChart","w","h","data","map","a","visitors","companiesName","name","myColor","scaleOrdinal","domain","range","svg","select","append","attr","style","selectAll","enter","d","i","text","reduce","acc","obj"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback, useState } from \"react\";\nimport \"./bar_chart.scss\";\nimport * as d3 from \"d3\";\n\nconst BarChart = ({ companies }) => {\n  let [sumOfVisitors, setSumOfVisitors] = useState(0);\n  console.log(sumOfVisitors);\n  const margin = { left: 50, top: 10, right: 50, bottom: 30 };\n\n  const drawChart = useCallback(() => {\n    const w = \"100%\";\n    const h = 300;\n    let data = companies.map(a => a.visitors);\n    let companiesName = companies.map(a => a.name);\n    console.log(companiesName);\n    const myColor = d3\n      .scaleOrdinal()\n      .domain(data)\n      .range([\"#F8C675\", \"rgb(221, 44, 74)\"]);\n\n    const svg = d3\n      .select(\".bar_chart\")\n      .append(\"svg\")\n      .attr(\"width\", w)\n      .attr(\"height\", h)\n      .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n      .attr(\n        \"viewBox\",\n        \"0 0 \" +\n          (w + margin.left + margin.right) +\n          \" \" +\n          (h + margin.top + margin.bottom)\n      )\n      .style(\"margin\", \"0 auto\");\n\n    svg\n      .selectAll(\"rect\")\n      .data(data)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d, i) => i * 70)\n      .attr(\"y\", (d, i) => h - 10 * d)\n      .attr(\"width\", 50)\n      .attr(\"height\", (d, i) => d * 70)\n      .attr(\"fill\", function(d) {\n        return myColor(d);\n      });\n\n    svg\n      .selectAll(\"text\")\n      .data(data)\n      .enter()\n      .append(\"text\")\n      .text(d => d)\n      .attr(\"x\", (d, i) => i * 70)\n      .attr(\"y\", (d, i) => h - 10 * d - 3);\n  }, [companies, margin.bottom, margin.left, margin.right, margin.top]);\n\n  useEffect(() => {\n    if (companies) {\n      drawChart();\n      setSumOfVisitors(\n        companies.reduce((acc, obj) => {\n          return acc + obj.visitors;\n        }, 0)\n      );\n    }\n  }, [companies, drawChart]);\n  return (\n    <div className=\"bar_chart\">\n      <span>All current visitors:{sumOfVisitors}</span>\n    </div>\n  );\n};\nexport default BarChart;\n"]},"metadata":{},"sourceType":"module"}