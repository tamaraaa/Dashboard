{"ast":null,"code":"import _slicedToArray from \"/Users/macbook/Desktop/dashboard/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/macbook/Desktop/dashboard/client/src/components/Dashboard/barChart/BarChart.js\";\nimport React, { useEffect, useCallback, useState } from \"react\";\nimport \"./bar_chart.scss\";\nimport * as d3 from \"d3\";\n\nconst BarChart = ({\n  companies\n}) => {\n  let _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      sumOfVisitors = _useState2[0],\n      setSumOfVisitors = _useState2[1];\n\n  console.log(sumOfVisitors);\n  const drawChart = useCallback(() => {\n    const w = 500;\n    const h = 300;\n    let data = companies.map(a => a.visitors);\n    let companiesName = companies.map(a => a.name);\n    console.log(companiesName);\n    const myColor = d3.scaleOrdinal().domain(data).range([\"#F8C675\", \"rgb(221, 44, 74)\"]);\n    const svg = d3.select(\".bar_chart\").append(\"svg\").attr(\"width\", w).attr(\"height\", h).style(\"margin-left\", 100);\n    svg.selectAll(\"rect\").data(data).enter().append(\"rect\").attr(\"x\", (d, i) => i * 70).attr(\"y\", (d, i) => h - 10 * d).attr(\"width\", 65).attr(\"height\", (d, i) => d * 70).attr(\"fill\", function (d) {\n      return myColor(d);\n    });\n    svg.selectAll(\"text\").data(data).enter().append(\"text\").text(d => d).attr(\"x\", (d, i) => i * 70).attr(\"y\", (d, i) => h - 10 * d - 3); // const letters = [\"A\", \"B\", \"C\", \"D\"];\n    // const numbers = [20, 60, 30, 20];\n    // const height = 400;\n    // const width = 700;\n    // const barWidth = width / numbers.length;\n    // const margin = { left: 50, top: 10, right: 50, bottom: 30 };\n    // const getRatio = side => (margin[side] / width) * 100 + \"%\";\n    // const marginRatio = {\n    //   left: getRatio(\"left\"),\n    //   top: getRatio(\"top\"),\n    //   right: getRatio(\"right\"),\n    //   bottom: getRatio(\"bottom\")\n    // };\n    // const svg = d3\n    //   .select(\"div#chart-container\")\n    //   .append(\"svg\")\n    //   .style(\n    //     \"padding\",\n    //     marginRatio.top +\n    //       \" \" +\n    //       marginRatio.right +\n    //       \" \" +\n    //       marginRatio.bottom +\n    //       \" \" +\n    //       marginRatio.left +\n    //       \" \"\n    //   )\n    //   .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n    //   .attr(\n    //     \"viewBox\",\n    //     \"0 0 \" +\n    //       (width + margin.left + margin.right) +\n    //       \" \" +\n    //       (height + margin.top + margin.bottom)\n    //   );\n    // const x = d3.scale\n    //   .ordinal()\n    //   .domain(letters)\n    //   .rangeRoundBands([0, width], 0.1, 0.1);\n    // const xAxis = d3.svg\n    //   .axis()\n    //   .scale(x)\n    //   .orient(\"bottom\");\n    // const y = d3.scale\n    //   .linear()\n    //   .domain([d3.max(numbers), 0])\n    //   .range([0, height]);\n    // const yAxis = d3.svg\n    //   .axis()\n    //   .scale(y)\n    //   .orient(\"left\");\n    // const bar = svg\n    //   .selectAll(\"g\")\n    //   .data(numbers)\n    //   .enter()\n    //   .append(\"g\")\n    //   .attr(\"transform\", (_, i) => \"translate(\" + i * barWidth + \", 0)\");\n    // svg\n    //   .append(\"g\")\n    //   .attr(\"class\", \"x axis\")\n    //   .call(xAxis)\n    //   .attr(\"transform\", \"translate(0,\" + height + \")\");\n    // svg\n    //   .append(\"g\")\n    //   .attr(\"class\", \"y axis\")\n    //   .call(yAxis);\n    // bar\n    //   .append(\"rect\")\n    //   .attr(\"class\", \"bar\")\n    //   .attr(\"width\", barWidth - 1)\n    //   .attr(\"y\", d => y(d))\n    //   .attr(\"height\", d => height - y(d));\n  }, [companies]);\n  useEffect(() => {\n    if (companies) {\n      drawChart();\n      setSumOfVisitors(companies.reduce((acc, obj) => {\n        return acc + obj.visitors;\n      }, 0));\n    }\n  }, [companies, drawChart]);\n  return React.createElement(\"div\", {\n    className: \"bar_chart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"All current visitors:\", sumOfVisitors));\n};\n\nexport default BarChart;","map":{"version":3,"sources":["/Users/macbook/Desktop/dashboard/client/src/components/Dashboard/barChart/BarChart.js"],"names":["React","useEffect","useCallback","useState","d3","BarChart","companies","sumOfVisitors","setSumOfVisitors","console","log","drawChart","w","h","data","map","a","visitors","companiesName","name","myColor","scaleOrdinal","domain","range","svg","select","append","attr","style","selectAll","enter","d","i","text","reduce","acc","obj"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback, useState } from \"react\";\nimport \"./bar_chart.scss\";\nimport * as d3 from \"d3\";\n\nconst BarChart = ({ companies }) => {\n  let [sumOfVisitors, setSumOfVisitors] = useState(0);\n  console.log(sumOfVisitors);\n  const drawChart = useCallback(() => {\n    const w = 500;\n    const h = 300;\n    let data = companies.map(a => a.visitors);\n    let companiesName = companies.map(a => a.name);\n    console.log(companiesName);\n    const myColor = d3\n      .scaleOrdinal()\n      .domain(data)\n      .range([\"#F8C675\", \"rgb(221, 44, 74)\"]);\n\n    const svg = d3\n      .select(\".bar_chart\")\n      .append(\"svg\")\n      .attr(\"width\", w)\n      .attr(\"height\", h)\n      .style(\"margin-left\", 100);\n\n    svg\n      .selectAll(\"rect\")\n      .data(data)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d, i) => i * 70)\n      .attr(\"y\", (d, i) => h - 10 * d)\n      .attr(\"width\", 65)\n      .attr(\"height\", (d, i) => d * 70)\n      .attr(\"fill\", function(d) {\n        return myColor(d);\n      });\n\n    svg\n      .selectAll(\"text\")\n      .data(data)\n      .enter()\n      .append(\"text\")\n      .text(d => d)\n      .attr(\"x\", (d, i) => i * 70)\n      .attr(\"y\", (d, i) => h - 10 * d - 3);\n    // const letters = [\"A\", \"B\", \"C\", \"D\"];\n    // const numbers = [20, 60, 30, 20];\n    // const height = 400;\n    // const width = 700;\n    // const barWidth = width / numbers.length;\n    // const margin = { left: 50, top: 10, right: 50, bottom: 30 };\n\n    // const getRatio = side => (margin[side] / width) * 100 + \"%\";\n\n    // const marginRatio = {\n    //   left: getRatio(\"left\"),\n    //   top: getRatio(\"top\"),\n    //   right: getRatio(\"right\"),\n    //   bottom: getRatio(\"bottom\")\n    // };\n\n    // const svg = d3\n    //   .select(\"div#chart-container\")\n    //   .append(\"svg\")\n    //   .style(\n    //     \"padding\",\n    //     marginRatio.top +\n    //       \" \" +\n    //       marginRatio.right +\n    //       \" \" +\n    //       marginRatio.bottom +\n    //       \" \" +\n    //       marginRatio.left +\n    //       \" \"\n    //   )\n    //   .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n    //   .attr(\n    //     \"viewBox\",\n    //     \"0 0 \" +\n    //       (width + margin.left + margin.right) +\n    //       \" \" +\n    //       (height + margin.top + margin.bottom)\n    //   );\n\n    // const x = d3.scale\n    //   .ordinal()\n    //   .domain(letters)\n    //   .rangeRoundBands([0, width], 0.1, 0.1);\n\n    // const xAxis = d3.svg\n    //   .axis()\n    //   .scale(x)\n    //   .orient(\"bottom\");\n\n    // const y = d3.scale\n    //   .linear()\n    //   .domain([d3.max(numbers), 0])\n    //   .range([0, height]);\n\n    // const yAxis = d3.svg\n    //   .axis()\n    //   .scale(y)\n    //   .orient(\"left\");\n\n    // const bar = svg\n    //   .selectAll(\"g\")\n    //   .data(numbers)\n    //   .enter()\n    //   .append(\"g\")\n    //   .attr(\"transform\", (_, i) => \"translate(\" + i * barWidth + \", 0)\");\n\n    // svg\n    //   .append(\"g\")\n    //   .attr(\"class\", \"x axis\")\n    //   .call(xAxis)\n    //   .attr(\"transform\", \"translate(0,\" + height + \")\");\n    // svg\n    //   .append(\"g\")\n    //   .attr(\"class\", \"y axis\")\n    //   .call(yAxis);\n    // bar\n    //   .append(\"rect\")\n    //   .attr(\"class\", \"bar\")\n    //   .attr(\"width\", barWidth - 1)\n    //   .attr(\"y\", d => y(d))\n    //   .attr(\"height\", d => height - y(d));\n  }, [companies]);\n\n  useEffect(() => {\n    if (companies) {\n      drawChart();\n      setSumOfVisitors(\n        companies.reduce((acc, obj) => {\n          return acc + obj.visitors;\n        }, 0)\n      );\n    }\n  }, [companies, drawChart]);\n  return (\n    <div className=\"bar_chart\">\n      <span>All current visitors:{sumOfVisitors}</span>\n    </div>\n  );\n};\nexport default BarChart;\n"]},"metadata":{},"sourceType":"module"}